
1.  version 1: 
    
    | 方面        | v1                                           ｜
    | ------     | --------------------------------------        | 
    | 主旨        | 单手势（open）康复动作相似度+张开度评估，循环训练并生成
                    单会话与累积报告                                | 
    | 手势        | 仅 open；按键 [1] 切换（实际上只有 open）。         | 
    | 新增核心特性 | 仅模板采集、形状+张开度合成评分、单/总（Master）PDF  | 
    | 模板结构    | 初始化/维护仅需要存在当前单手势模板；采集时直接       ｜
                    覆盖该手势指尖模板                               | 
    | 打分扩展    | 指尖形状相似度（指数衰减 + 拇指加权）+ openness，
                    固定权重组合 0.7/0.3                            | 
    | 数据留存    | 会话 PDF（单手势）+ 累积 Master 报告
                    （所有 session 汇总同一表）                      | 
    | 使用场景    | 单一基础动作训练/进步记录                          | 

    单一手势的基础版本，评分权重与总分合成都固定，报告是简单的按时间累积。


2.  version 2: 
    | 方面        | v2                                         |
    | ------     | --------------------------------           |
    | 主旨        | 多手势康复质量测评 & 报告                      |
    | 手势        | open / fist / pinch 全部评分                |
    | 新增核心特性 | Pinch 特化评分、PDF 报告、历史曲线、分组 Master |
    | 模板结构    ｜ 全部手势模板                                 |
    | 打分扩展    | 三公式 + pinch 距离 + 中等开放度优化           |
    | 数据留存    | 训练 CSV + PDF + 图像历史                    |
    | 平滑处理    | 直接最大值                                  |
    | 使用场景    | 系统化康复记录与文档归档                       |

    在多手势支持、手势自适应评分策略（不同手势不同指权重、开放度/闭合度、pinch 距离）、模板文件
    结构与自愈、分组汇总报告格式、UI 交互与快捷键、以及 可扩展性 等方面做了系统升级

3.  version 3: 
    | 方面        | v3                                           |
    | ------     | --------------------------------------        | 
    | 主旨        | 交互式 RPS 对战 + 动作质量                      | 
    | 手势        | open/fist (映射 paper/rock)，scissors 不评分   | 
    | 新增核心特性 | 网络 P2P、Cheat 难度、自带胜负/积分              | 
    | 模板结构    | 仅 open/fist                                  | 
    | 打分扩展    | 双公式 (open vs fist) + closure                | 
    | 数据留存    | 回合 CSV（含战绩与作弊）                         | 
    | 平滑处理    | Total 滑动窗口（best\_total 平滑）               | 
    | 使用场景    | 游戏化+对战+基础康复质量                          | 

    整体定位从“多手势康复评估”转向“对战+训练”：v3 引入 Rock/Paper/Scissors (RPS) 游戏化
    主循环与模式菜单；
 
    联机 (Host/Client) 与网络通信支持：v3 增加主机/客户端模式与套接字建立逻辑；

    RPS 回合与胜负判定机制：v3 以“Round”为单位显示回合、玩家/对手手势与结果；v2 以“Session”
    收集单手势训练数据。
    
    胜负积分与战绩统计：v3 维护 Score、W/L/D（胜/负/平）计数并在结果界面输出；v2 无战绩概念。

    Cheat（自适应“作弊”难度）系统：v3 定义激活阈值及概率增长参数并在达到得分条件后启用；v2 没
    有难度/干预逻辑。
    
    手势范围改变：v3 只保留和 RPS 直接相关的 open ↔ paper、fist ↔ rock（scissors 参与胜
    负但不做形状完成度评分）；v2 支持 open/fist/pinch 并对 pinch 做专门评分。

    Pinch 专用评分被移除：v2 的拇指—食指距离与中等开放度最优逻辑在 v3 不存在；v3 评分只区分 
    open 与 fist。

    评分公式精简：v3 仅保留 open (形状+开放度 0.7/0.3) 与 fist (形状+闭合度 0.6/0.4) 两
    种合成方式；v2 还包含 pinch 的三项组合 (形状+pinch距离+开放度中值)。

    模板管理收缩：v3 模板文件只保证 open 与 fist 键存在；v2 加载后会补齐所有（含 pinch）
    手势模板以便扩展。
    
    采集与评分触发逻辑改变：v3 在回合捕获阶段先进行 R/P/S 分类，只有属于 rock 或 paper 时
    才执行完成度计算与模板更新；v2 在 capture 阶段直接基于当前手势（包括 pinch）做评分。
    
    滑动窗口平滑新增：v3 使用 total_window 滑动窗口平滑当前 total 再更新 best_total；v2 
    直接单帧比较，不做平滑。

    结果界面元素变化：v3 结果界面添加对手手势、胜负、累计战绩、Cheat 概率；v2 结果界面突出 
    Session 完成度与各手指偏差、并提示继续或退出。

    数据记录字段扩展方向不同：v3 CSV（显示层面）聚焦回合胜负、得分、Cheat 状态；v2 CSV 专注
    康复指标（Total/Shape/Open）并配合历史曲线与 PDF 报告。

    报告与可视化被移除/替换：v3 不生成 per-session / master PDF、也不绘制历史曲线；v2 生
    成会话 PDF、分组 Master PDF 以及历史曲线图。

    历史数据结构差异：v3 不维护跨回合 total 历史曲线；v2 使用 history 和 session_records 
    生成统计/曲线。

    用户交互节奏变化：v3 强调“下一回合 (Enter)”的快速循环对战体验；v2 强调一次 Session 的
    测评与档案沉淀。

    功能取舍方向：v3 为实时对战和网络延迟考虑，砍掉 pinch 与报告等离线分析功能，换取游戏化与
    难度调节；v2 保留全面康复数据与文档输出以利长期跟踪。



4.  version 4:
    | 方面        | v4                                                        |
    | ------     | --------------------------------------                    | 
    | 主旨        | 在 v3 基础上引入双向动态难度（Cheat + Assist），细化高/低分调节。 | 
    | 手势        | 手势范围未变                                                | 
    | 新增核心特性 | 新增 Assist 低分扶持 + 玩家胜利也提升作弊概率 + 模式优先级。      | 
    | 模板结构    | 仍为 open / fist，加载时保证两个键存在。                        | 
    | 打分扩展    | 打分逻辑保持不变                                              | 
    | 数据留存    | 在原有基础上新增 AssistActive / AssistWinProb 等字段。         | 
    | 使用场景    | 更平衡的游戏化训练：高分加压 + 低分减压，提升粘性与公平感。         | 

    整体难度调节体系升级：v4 在原有作弊（Cheat）基础上加入“高分加压 + 低分扶持”双向动态难度
    （Cheat + Assist）闭环；v3 只有单向随成绩提升的 Cheat，低分无缓冲。

    联机与模式框架：v4 沿用 v3 的本地 / Host / Client 联机框架，未改动结构但在状态显示中加
    入 Assist 变量；v3 仅显示 Cheat 状态。

    AI 出招决策层次：v4 明确三层优先级：Cheat > Assist > Normal（互斥判定）；v3 只有 
    Cheat 或普通随机。

    Cheat 触发与增长逻辑：v4 作弊概率既可因“成功克制”又可因“玩家胜利”同步提升并受上限约束；
    v3 只在成功使用克制手势时递增。

    Assist（低分扶持）机制：v4 在玩家总分跌到阈值（如 ≤ -3）后启动 Assist，降低 AI 胜率并
    限制其连续压制；v3 不提供低分自适应保护。

    玩家胜利对难度反馈：v4 玩家赢一局在作弊激活阶段也会推动作弊概率上升（鼓励保持挑战强度）；
    v3 玩家胜利不直接影响作弊概率。

    分数区间动态收敛设计：v4 通过“高分更难 / 低分减压”使玩家分数围绕目标区间波动；v3 可能出
    现高分持续滚雪球或低分持续受挫的单边趋势。

    状态变量与参数扩展：v4 新增 Assist 激活标志、AI 胜率目标、玩家胜利增量参数等；v3 只有 
    cheat_active 与 cheat_prob 等少量参数。

    AI 胜率调整方式：v4 在 Assist 模式下逐步下降 AI 赢概率（同时可保留平局概率），形成渐进
    “扶梯”式回调；v3 没有对 AI 胜率进行概率曲线调整。

    模式切换条件：v4 进入 / 退出 Cheat 与 Assist 各有独立阈值与复位逻辑（互斥保障）；v3 仅
    判断是否达到 Cheat 触发阈值。

    出招函数复杂度：v4 出招需要先判全局模式 → 内部概率抽样 → （Cheat 时）强制克制，否则按
     Assist 概率表或随机；v3 只判是否作弊再决定克制还是随机。

    运行时信息展示：v4 在界面/日志中可同时展示 Cheat p 或 Assist AIwin（取决于当前模式），
    给玩家透明难度反馈；v3 只展示 Cheat 概率（无 Assist 信息）。

    CSV / 数据记录结构：v4 记录中新增 Assist 相关字段（AssistActive、AssistWinProb 等），
    便于回溯难度曲线；v3 只有与 Cheat 及胜负相关的列。

    用户体验调性：v4 主打“动态弹性”体验：赢多了更有挑战，输多了得到缓冲，减少挫败或无聊窗口；
    v3 偏向“线性加难”，在极端表现时体验波动更大。

    风险与控制：v4 增强控制力但需要调参（阈值、增量、上下限）避免难度振荡；v3 参数少，维护简单
    但自适应粒度粗。

    扩展潜力：v4 的双模式架构天然可再插入其它模式（例如“精准模式”“限时模式”）作为新的优先层；
    v3 需先重构模式判定层次才方便加入。

    维护与调试成本：v4 增加逻辑分支与参数，测试矩阵更大（需验证模式切换边缘条件）；v3 结构较
    平坦，调试负担低。

    学习与呈现价值：v4 更适合展示“游戏化自适应难度设计”的完整案例（含正负反馈回路）；v3 更适合
    演示基础“动作识别 + 简单难度提升”原理。

